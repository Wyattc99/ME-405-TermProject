<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Term Project: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 405 Term Project
   </div>
   <div id="projectbrief">Authors: Wyatt Conner, Jameson Spitz, Jacob Wong</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Main Page </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_intro1"></a>
Software Design</h1>
<p >Our program will consist of the task functions zero_position(), update_pwm_radial(), update_pwm_theta(), get_setpoint_r(), and get_setpoint_theta(). The zero_position() task sets the duty cycle of the motor controlling the radial direction to 45 so the pen moves towards home base (our y-offset) until it hits the limit switch. Once the limit switch triggers, the zero_position() task enters an empty state and triggers the position control phases to begin. The update_pwm tasks facilitate position control by setting the duty cycle of each respective motor based on the error between our encoder position and setpoint adjusted by our proportional gain value. As each encoder gets closer to its desired position, the duty cycles will be decreasing to reach a final position without overshooting via closed loop position control. The update_pwm tasks also check if a desired setpoint has been reached by an individual motor. In this case, that motorâ€™s duty cycle is set to zero until the other motor reaches its setpoint. Once all setpoints have been reached, the duty cycle of each motor is set to zero to terminate the program. The get_setpoint() tasks are responsible for iterating to the next desired HPGL setpoint for each motor once the previous setpoint has been set. These tasks also flag once a setpoint has been reached, signaling to the updat_pwm tasks to stop the respective motor until the other motor's setpoint flag is triggered. All in all, our system works by performing closed loop position control on each motor individually, each having its own gain value and setpoints. The setpoints are acquired from HPGL and converted from raw dpi into encoder ticks that we specify for each motor. The setpoints for our radial and theta coordinates are iterated through once each motor has reached its desired setpoint within reasonable error. All tasks are facilitated by a main file, storing data in shares and queues so tasks and other files can share data. While each motor is being controlled, we integrated a solenoid to control the orientation of the pen acquired from HPGL setpoint data. Additionally, we use a limit_switch to ensure our pen position is set at the right zero point and does not move too far in the radial direction to damage our system. The main file runs all tasks through the task scheduler from the file co_task().</p>
<h1><a class="anchor" id="subsec_intro2"></a>
Task Diagram and Finite State Machines</h1>
<p >Below is the Task Diagram of all tasks used to control the pencil position.</p>
<div class="image">
<img src="TaskDiagram_FinalProj.jpg" alt=""/>
</div>
<p >Below is the Finite State Machine for our the position control file of one motor.</p>
<div class="image">
<img src="Fsm_TermProj.jpg" alt=""/>
</div>
<h1><a class="anchor" id="subsec_intro3"></a>
Example System Response and PuTTY command window</h1>
<p >A link to an exapmle system response can be found here: <a href="https://youtu.be/lQJ4eko8kKs">https://youtu.be/lQJ4eko8kKs</a> A link to an example PuTTY command window can be found here: <a href="https://youtu.be/Qp4Me-iPOtM">https://youtu.be/Qp4Me-iPOtM</a> In our PUTTY output we begin by zeroing the pen position, showing the duty cycle set to 45%. Once the position has been zero'd we begin to see print statements of our current set position for each motor. You can see the current position chasing the current set point, and once the setpoint is reached you can see the program increments to next set point. These print statements helped us in debugging, showing that our set point does in fact change once the error criteria is reached. </p><dl class="section author"><dt>Author</dt><dd>Jameson Spitz </dd>
<dd>
Jacob Wong </dd>
<dd>
Wyatt Conner</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>CC BY</dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 10, 2022 </dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
